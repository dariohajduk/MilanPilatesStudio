(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[437],{155:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a=r(6540),i=r(2942),n=r(6430),s=r(4848);let l=(0,a.createContext)(),d=()=>(0,a.useContext)(l);var c=r(3909),o=r(5093),u=r.n(o);r(4924),(0,c.ye)(u());let p=()=>{let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{{t(window.innerWidth<1024);let e=()=>t(window.innerWidth<1024);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}},[]),e},m=()=>{let{lessons:e=[],addLesson:t,removeLesson:r}=d()||{},[l,c]=(0,a.useState)([]),o=p(),[m,x]=(0,a.useState)(!1),[g,h]=(0,a.useState)({instructor:"",type:"",maxParticipants:0,date:"",time:""});(0,a.useEffect)(()=>{let r=!0;return(async()=>{try{let a=await (0,n.GG)((0,n.rJ)(i.db,"LessonTypes"));if(!r)return;c(a.docs.map(e=>({id:e.id,...e.data()})));let s=(0,n.rJ)(i.db,"Lessons"),l=await (0,n.GG)(s);if(!r)return;let d=l.docs.map(e=>({id:e.id,...e.data()})),o=e.map(e=>e.id);d.forEach(e=>{e.id&&!o.includes(e.id)&&t(e)})}catch(e){console.error("Error fetching data:",e)}})(),()=>{r=!1}},[e,t]);let b=async()=>{if(""===g.instructor.trim()||""===g.type.trim()||g.maxParticipants<=0||o&&(""===g.date||""===g.time)){alert("אנא מלא את כל השדות בטופס");return}let e={date:g.date,time:g.time,instructor:g.instructor,type:g.type,maxParticipants:g.maxParticipants.toString(),registeredParticipants:0,createdAt:u()().toISOString(),title:`${g.type} - ${g.instructor}`,isActive:u()(`${g.date}T${g.time}`).isAfter(u()()),waitingList:[]};try{let r=await (0,n.gS)((0,n.rJ)(i.db,"Lessons"),e);t({id:r.id,...e}),h({instructor:"",type:"",maxParticipants:0,date:"",time:""}),x(!1)}catch(e){console.error("Error adding lesson:",e),alert("אירעה שגיאה בהוספת השיעור")}};return(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-xl font-bold mb-4",children:"ניהול שיעורים"}),(0,s.jsx)("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-lg",children:"הוסף שיעור"}),m&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4",children:"הוסף שיעור"}),(0,s.jsx)("input",{type:"text",placeholder:"שם המדריך",value:g.instructor,onChange:e=>h({...g,instructor:e.target.value}),className:"w-full p-2 border rounded-lg mb-2",required:!0}),(0,s.jsxs)("select",{value:g.type,onChange:e=>h({...g,type:e.target.value}),className:"w-full p-2 border rounded-lg mb-2",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"בחר סוג שיעור"}),l.map(e=>(0,s.jsx)("option",{value:e.type,children:e.type},e.id))]}),(0,s.jsx)("input",{type:"number",placeholder:"מספר משתתפים מקסימלי",value:g.maxParticipants,onChange:e=>h({...g,maxParticipants:parseInt(e.target.value)||0}),className:"w-full p-2 border rounded-lg mb-2",min:"1",required:!0}),o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"date",value:g.date,onChange:e=>h({...g,date:e.target.value}),className:"w-full p-2 border rounded-lg mb-2",required:!0}),(0,s.jsx)("input",{type:"time",value:g.time,onChange:e=>h({...g,time:e.target.value}),className:"w-full p-2 border rounded-lg mb-2",required:!0})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-gray-500 text-white rounded-lg",children:"ביטול"}),(0,s.jsx)("button",{onClick:b,className:"px-4 py-2 bg-green-500 text-white rounded-lg",children:"הוסף"})]})]})})]})}},3070:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/LessonManagement",function(){return r(155)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[54,197,943,636,593,792],()=>t(3070)),_N_E=e.O()}]);