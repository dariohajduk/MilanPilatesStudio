(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{4849:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var t=a(6540),r=a(9416),n=a(5150),i=a(4848);let d=({lesson:e})=>(0,i.jsx)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"font-bold text-lg",children:e.title||`${e.type} - ${e.instructor}`}),(0,i.jsxs)("p",{className:"text-gray-600",children:["מדריך: ",e.instructor]}),(0,i.jsxs)("p",{className:"text-gray-600",children:["תאריך: ",e.date]}),(0,i.jsxs)("p",{className:"text-gray-600",children:["שעה: ",e.time]})]})});var l=a(2409);let c=()=>{let{userData:e}=(0,r.J)(),[s,a]=(0,t.useState)([]),[c,m]=(0,t.useState)(!0),[x,h]=(0,t.useState)(""),o=new Date,p=(0,t.useCallback)(async()=>{try{let s=(await (0,n.R0)(e.phone)).filter(e=>new Date(e.date)>o);a(s)}catch(e){console.error("Error fetching registered lessons:",e),h("אירעה שגיאה בטעינת השיעורים")}finally{m(!1)}},[e,o]);return((0,t.useEffect)(()=>{e?.phone&&p()},[p]),e)?(0,i.jsxs)("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[x&&(0,i.jsx)(l.A,{message:x}),(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"פרופיל משתמש"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,i.jsx)("span",{className:"text-gray-600 ml-2",children:"\uD83D\uDC64"}),(0,i.jsx)("span",{className:"text-gray-600",children:"שם: "}),(0,i.jsx)("span",{className:"font-medium mr-2",children:e.name})]}),(0,i.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,i.jsx)("span",{className:"text-gray-600 ml-2",children:"\uD83D\uDCF1"}),(0,i.jsx)("span",{className:"text-gray-600",children:"טלפון: "}),(0,i.jsx)("span",{className:"font-medium mr-2",dir:"ltr",children:e.phone})]}),(0,i.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,i.jsx)("span",{className:"text-gray-600 ml-2",children:"\uD83D\uDEE1️"}),(0,i.jsx)("span",{className:"text-gray-600",children:"סוג משתמש: "}),(0,i.jsx)("span",{className:"font-medium mr-2",children:e.isAdmin?"מנהל":"משתמש רגיל"})]}),(0,i.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,i.jsx)("span",{className:"text-gray-600 ml-2",children:"\uD83D\uDEE1️"}),(0,i.jsx)("span",{className:"text-gray-600",children:"סוג מנוי: "}),(0,i.jsx)("span",{className:"font-medium mr-2",children:e.membership||"לא מוגדר"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:"השיעורים שנרשמת אליהם"}),c?(0,i.jsx)("p",{className:"text-center text-gray-500 py-4",children:"טוען שיעורים..."}):s.length>0?(0,i.jsx)("div",{className:"space-y-4",children:s.map((e,s)=>(0,i.jsx)(d,{lesson:e},s))}):(0,i.jsx)("p",{className:"text-center text-gray-500 py-4",children:"לא נרשמת לשום שיעור"})]})]}):(0,i.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,i.jsx)("div",{className:"text-gray-500",children:"טוען..."})})}},2409:(e,s,a)=>{"use strict";a.d(s,{A:()=>r}),a(6540);var t=a(4848);let r=({message:e})=>(0,t.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,t.jsx)("span",{className:"block sm:inline",children:e})})},5150:(e,s,a)=>{"use strict";a.d(s,{Nn:()=>d,R0:()=>c,Ry:()=>m,gw:()=>o,hG:()=>p,hU:()=>x,nu:()=>h,t9:()=>n,tI:()=>i,yo:()=>l});var t=a(6430),r=a(2942);let n=async e=>(await (0,t.GG)((0,t.rJ)(r.db,e))).docs.map(e=>({id:e.id,...e.data()})),i=async(e,s)=>({id:(await (0,t.gS)((0,t.rJ)(r.db,e),s)).id,...s}),d=async(e,s)=>{await (0,t.kd)((0,t.H9)(r.db,e,s))},l=async()=>(await (0,t.GG)((0,t.rJ)(r.db,"Lessons"))).docs.map(e=>({id:e.id,...e.data()})),c=async e=>{let s=(0,t.H9)(r.db,"Users",e),a=await (0,t.x7)(s);return a.exists()&&a.data().registeredLessons||[]},m=async(e,s,a)=>{let n=(0,t.H9)(r.db,"Lessons",e),i=(0,t.H9)(r.db,"Users",s.phone),d=a?{waitingList:(0,t.hq)(s.phone),registeredParticipants:(s.registeredParticipants||0)+1}:{waitingList:(0,t.C3)(s.phone),registeredParticipants:Math.max((s.registeredParticipants||0)-1,0)},l=a?{registeredLessons:(0,t.hq)({id:e,date:new Date().toISOString(),type:"Lesson Type"})}:{registeredLessons:(0,t.C3)({id:e,date:new Date().toISOString()})};await (0,t.mZ)(n,d),await (0,t.mZ)(i,l)},x=async()=>(await (0,t.GG)((0,t.rJ)(r.db,"Users"))).docs.map(e=>({id:e.id,...e.data()})),h=async e=>{let s=(0,t.H9)(r.db,"Users",e.phone);await (0,t.BN)(s,e)},o=async(e,s)=>{let a=(0,t.H9)(r.db,"Users",e);await (0,t.mZ)(a,s)},p=async e=>{let s=(0,t.H9)(r.db,"Users",e);await (0,t.kd)(s)}},6748:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/ProfileScreen",function(){return a(4849)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[636,593,792],()=>s(6748)),_N_E=e.O()}]);