(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{996:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var l=s(6540),a=s(6430),r=s(2942),n=s(9416),i=s(8916);let o=e=>/^05\d{8}$/.test(e);var c=s(4848);let d=({setCurrentScreen:e})=>{let[t,s]=(0,l.useState)(""),[d,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)(""),{updateUserData:h}=(0,n.J)(),{logoUrl:b,loading:g}=(0,i.x)();if(console.log("Logo URL:",b),g)return(0,c.jsx)("div",{children:"Loading..."});let p={phone:"0500000000",name:"מנהל מערכת",isAdmin:!0},f=async s=>{s.preventDefault(),m(!0);try{if(!o(t))throw Error("נא להזין מספר טלפון תקין בפורמט: 05XXXXXXXX");if(t===p.phone){h(p),e("admin"),m(!1);return}let s=(0,a.H9)(r.db,"Users",t),l=await (0,a.x7)(s);if(l.exists()){let s={phone:t,...l.data(),isAdmin:!1,registeredLessons:l.data().registeredLessons||[],completedLessons:l.data().completedLessons||0,membershipType:l.data().membershipType||"רגיל",joinDate:l.data().joinDate||new Date().toISOString()};h(s),e("home")}else if(t===p.phone)e("admin");else throw Error("מספר טלפון לא נמצא במערכת")}catch(e){console.error("Login error:",e),x(e.message)}finally{m(!1)}};return(0,c.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex items-center justify-center p-4",children:(0,c.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white/90 backdrop-blur-sm rounded-xl p-8 shadow-lg",children:[(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,c.jsx)("img",{src:b||"/fallback-logo.png",alt:"Milan Pilates Logo",className:"w-32 h-32 object-contain mb-4"}),(0,c.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-400 text-transparent bg-clip-text",children:"Milan Pilates"}),(0,c.jsx)("span",{className:"text-sm text-gray-500 mt-1",children:"By Isakov Team"})]}),(0,c.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"ברוכים הבאים"}),(0,c.jsx)("p",{className:"mt-2 text-gray-600",children:"התחברו כדי להירשם לשיעורים ולנהל את האימונים שלכם"})]}),(0,c.jsxs)("form",{onSubmit:f,className:"mt-8 space-y-6",children:[u&&(0,c.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg text-sm text-center",children:u}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"מספר טלפון"}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("span",{className:"absolute right-3 top-3 text-gray-400",children:"\uD83D\uDCF1"}),(0,c.jsx)("input",{id:"phone",type:"tel",value:t,onChange:e=>{s(e.target.value.replace(/[^0-9]/g,"")),u&&x("")},disabled:d,className:"w-full pr-10 p-3 border border-gray-300 rounded-lg  focus:ring-2 focus:ring-blue-200 focus:border-blue-400  outline-none transition-all disabled:opacity-50",placeholder:"הזינו מספר טלפון",dir:"ltr",maxLength:10})]}),(0,c.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"יש להזין מספר בפורמט: 05XXXXXXXX"})]}),(0,c.jsx)("button",{type:"submit",disabled:d||!t,className:"w-full p-3 bg-gradient-to-r from-blue-600 to-blue-500  text-white rounded-lg font-medium transition-all hover:from-blue-700 hover:to-blue-600  focus:outline-none focus:ring-2 focus:ring-blue-300 disabled:opacity-50",children:d?(0,c.jsxs)("div",{className:"flex items-center justify-center",children:[(0,c.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,c.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,c.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"טוען..."]}):"התחבר"})]})]})})}},5408:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/LoginForm",function(){return s(996)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(5408)),_N_E=e.O()}]);