(this["webpackJsonpmilan-pilates-studio"]=this["webpackJsonpmilan-pilates-studio"]||[]).push([[0],{239:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),r=s(69),n=s.n(r),l=s(2),i=s(98),d=s(5),o=s(116);const b=Object(i.a)({apiKey:"AIzaSyBgRjJShNJqWB2nq931kKobLRHUeejW0vo",authDomain:"milan-studio-b8b4b.firebaseapp.com",databaseURL:"https://milan-studio-b8b4b-default-rtdb.europe-west1.firebasedatabase.app",projectId:"milan-studio-b8b4b",storageBucket:"milan-studio-b8b4b.firebasestorage.app",messagingSenderId:"961084768524",appId:"1:961084768524:web:2cdbc3a67dc018d8058929",measurementId:"G-8XF83E9KQY"}),j=Object(d.i)(b);Object(o.a)(b);var m=s(0);const x=Object(a.createContext)(),h=e=>{let{children:t}=e;const[s,c]=Object(a.useState)(null),[r,n]=Object(a.useState)(!1);return Object(m.jsx)(x.Provider,{value:{userData:s,isLoggedIn:r,updateUserData:async e=>{try{const t=Object(d.f)(j,"Users",e.phone),s=await Object(d.g)(t);if(s.exists()){const t=s.data();c(Object(l.a)(Object(l.a)({},t),{},{phone:e.phone,isAdmin:Boolean(t.isAdmin)})),n(!0)}else console.error("User not found in Firebase")}catch(t){console.error("Error fetching user data from Firebase:",t)}},refreshUserData:async e=>{if(e)try{const t=Object(d.f)(j,"Users",e),s=await Object(d.g)(t);if(s.exists()){const t=s.data();c(Object(l.a)(Object(l.a)({},t),{},{phone:e}))}else console.error("User not found in Firebase")}catch(t){console.error("Error refreshing user data:",t)}else console.error("Cannot refresh user data: phone is undefined")},logout:()=>{c(null),n(!1)}},children:t})},u=()=>Object(a.useContext)(x),g=Object(a.createContext)(null),p=e=>{let{children:t}=e;const[s,c]=Object(a.useState)("https://your-default-logo-url.com/logo.png");return Object(m.jsx)(g.Provider,{value:{logoUrl:s,setLogoUrl:c},children:t})},O=()=>{const e=Object(a.useContext)(g);if(!e)throw new Error("useLogo must be used within a LogoProvider");return e};var f=e=>{let{setCurrentScreen:t}=e;const[s,c]=Object(a.useState)(""),[r,n]=Object(a.useState)(!1),[i,o]=Object(a.useState)(""),{updateUserData:b}=u(),{logoUrl:x,loading:h}=O();if(console.log("Logo URL:",x),h)return Object(m.jsx)("div",{children:"Loading..."});const g={phone:"0500000000",name:"\u05de\u05e0\u05d4\u05dc \u05de\u05e2\u05e8\u05db\u05ea",isAdmin:!0};return Object(m.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex items-center justify-center p-4",children:Object(m.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white/90 backdrop-blur-sm rounded-xl p-8 shadow-lg",children:[Object(m.jsxs)("div",{className:"text-center",children:[Object(m.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[Object(m.jsx)("img",{src:x||"/fallback-logo.png",alt:"Milan Pilates Logo",className:"w-32 h-32 object-contain mb-4"}),Object(m.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-400 text-transparent bg-clip-text",children:"Milan Pilates"}),Object(m.jsx)("span",{className:"text-sm text-gray-500 mt-1",children:"By Isakov Team"})]}),Object(m.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"\u05d1\u05e8\u05d5\u05db\u05d9\u05dd \u05d4\u05d1\u05d0\u05d9\u05dd"}),Object(m.jsx)("p",{className:"mt-2 text-gray-600",children:"\u05d4\u05ea\u05d7\u05d1\u05e8\u05d5 \u05db\u05d3\u05d9 \u05dc\u05d4\u05d9\u05e8\u05e9\u05dd \u05dc\u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05d5\u05dc\u05e0\u05d4\u05dc \u05d0\u05ea \u05d4\u05d0\u05d9\u05de\u05d5\u05e0\u05d9\u05dd \u05e9\u05dc\u05db\u05dd"})]}),Object(m.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),n(!0);try{if(!/^05\d{8}$/.test(s))throw new Error("\u05e0\u05d0 \u05dc\u05d4\u05d6\u05d9\u05df \u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df \u05ea\u05e7\u05d9\u05df \u05d1\u05e4\u05d5\u05e8\u05de\u05d8: 05XXXXXXXX");if(s===g.phone)return b(g),t("admin"),void n(!1);const e=Object(d.f)(j,"Users",s),a=await Object(d.g)(e);if(a.exists()){const e=Object(l.a)(Object(l.a)({phone:s},a.data()),{},{isAdmin:!1,registeredLessons:a.data().registeredLessons||[],completedLessons:a.data().completedLessons||0,membershipType:a.data().membershipType||"\u05e8\u05d2\u05d9\u05dc",joinDate:a.data().joinDate||(new Date).toISOString()});b(e),t("home")}else{if(s!==g.phone)throw new Error("\u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df \u05dc\u05d0 \u05e0\u05de\u05e6\u05d0 \u05d1\u05de\u05e2\u05e8\u05db\u05ea");t("admin")}}catch(a){console.error("Login error:",a),o(a.message)}finally{n(!1)}},className:"mt-8 space-y-6",children:[i&&Object(m.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg text-sm text-center",children:i}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"\u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df"}),Object(m.jsxs)("div",{className:"relative",children:[Object(m.jsx)("span",{className:"absolute right-3 top-3 text-gray-400",children:"\ud83d\udcf1"}),Object(m.jsx)("input",{id:"phone",type:"tel",value:s,onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"");c(t),i&&o("")},disabled:r,className:"w-full pr-10 p-3 border border-gray-300 rounded-lg  focus:ring-2 focus:ring-blue-200 focus:border-blue-400  outline-none transition-all disabled:opacity-50",placeholder:"\u05d4\u05d6\u05d9\u05e0\u05d5 \u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df",dir:"ltr",maxLength:10})]}),Object(m.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"\u05d9\u05e9 \u05dc\u05d4\u05d6\u05d9\u05df \u05de\u05e1\u05e4\u05e8 \u05d1\u05e4\u05d5\u05e8\u05de\u05d8: 05XXXXXXXX"})]}),Object(m.jsx)("button",{type:"submit",disabled:r||!s,className:"w-full p-3 bg-gradient-to-r from-blue-600 to-blue-500  text-white rounded-lg font-medium transition-all hover:from-blue-700 hover:to-blue-600  focus:outline-none focus:ring-2 focus:ring-blue-300 disabled:opacity-50",children:r?Object(m.jsxs)("div",{className:"flex items-center justify-center",children:[Object(m.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[Object(m.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Object(m.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"\u05d8\u05d5\u05e2\u05df..."]}):"\u05d4\u05ea\u05d7\u05d1\u05e8"})]})]})})};const v=e=>{let{title:t,children:s}=e;return Object(m.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[Object(m.jsx)("h2",{className:"text-xl font-semibold mb-4",children:t}),s]})},y=e=>{let{lesson:t}=e;return Object(m.jsxs)("li",{className:"flex flex-col p-3 bg-gray-50 rounded-lg",children:[Object(m.jsxs)("span",{className:"font-bold text-gray-800",children:["\u05e9\u05dd \u05d4\u05e9\u05d9\u05e2\u05d5\u05e8: ",t.title]}),Object(m.jsxs)("span",{className:"text-gray-600",children:["\u05e1\u05d5\u05d2 \u05d4\u05e9\u05d9\u05e2\u05d5\u05e8: ",t.type||"\u05dc\u05d0 \u05de\u05d5\u05d2\u05d3\u05e8"]}),Object(m.jsxs)("span",{className:"text-gray-600",children:["\u05ea\u05d0\u05e8\u05d9\u05da: ",new Date(t.date).toLocaleDateString("he-IL")]}),Object(m.jsxs)("span",{className:"text-gray-600",children:["\u05e9\u05e2\u05d4: ",t.time]})]})},N=e=>{let{label:t,value:s}=e;return Object(m.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[Object(m.jsx)("span",{className:"text-gray-600",children:t}),Object(m.jsx)("span",{className:"font-semibold",children:s})]})},w=e=>{let{label:t,value:s}=e;return Object(m.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[Object(m.jsxs)("span",{className:"text-gray-600",children:[t,": "]}),Object(m.jsx)("span",{className:"font-semibold",children:s})]})};var S=()=>{const{userData:e}=u(),{logoUrl:t}=O(),s=new Date;s.setHours(0,0,0,0);const a=new Date;a.setDate(s.getDate()+(7-s.getDay()));const c=(()=>{var t;return(null===e||void 0===e||null===(t=e.registeredLessons)||void 0===t?void 0:t.filter((e=>{const t=new Date(e.date);return t>=s&&t<=a})))||[]})(),r=(()=>{var t;return(null===e||void 0===e||null===(t=e.registeredLessons)||void 0===t?void 0:t.filter((e=>new Date(e.date)<s)).length)||0})(),n=(t=>{const a=null!==e&&void 0!==e&&e.joinDate?new Date(e.joinDate):s,c=s-a,r=Math.ceil(c/6048e5);return(t/(r>0?r:1)).toFixed(2)})(r);return Object(m.jsxs)("div",{className:"space-y-6",children:[Object(m.jsxs)("div",{className:"text-center bg-white rounded-lg p-8 shadow-sm",children:[Object(m.jsx)("div",{className:"logo-container",children:Object(m.jsx)("img",{src:t||"/default-logo.png",alt:"Studio Logo",className:"logo"})}),Object(m.jsxs)("h1",{className:"text-2xl font-bold text-gray-800",children:[(()=>{const e=(new Date).getHours();return e<12?"\u05d1\u05d5\u05e7\u05e8 \u05d8\u05d5\u05d1":e<17?"\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd \u05d8\u05d5\u05d1\u05d9\u05dd":e<21?"\u05e2\u05e8\u05d1 \u05d8\u05d5\u05d1":"\u05dc\u05d9\u05dc\u05d4 \u05d8\u05d5\u05d1"})(),", ",(null===e||void 0===e?void 0:e.name)||"\u05d0\u05d5\u05e8\u05d7"]}),Object(m.jsx)("p",{className:"text-gray-600 mt-2",children:"\u05d1\u05e8\u05d5\u05db\u05d9\u05dd \u05d4\u05d1\u05d0\u05d9\u05dd \u05dc\u05de\u05e2\u05e8\u05db\u05ea \u05d4\u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05e9\u05dc Milan Pilates"})]}),Object(m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Object(m.jsx)(v,{title:"\u05d4\u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05d4\u05e7\u05e8\u05d5\u05d1\u05d9\u05dd \u05e9\u05dc\u05da",children:c.length>0?Object(m.jsx)("ul",{className:"space-y-3",children:c.map(((e,t)=>Object(m.jsx)(y,{lesson:e},t)))}):Object(m.jsx)("p",{className:"text-gray-500 text-center py-4",children:"\u05d0\u05d9\u05df \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05e7\u05e8\u05d5\u05d1\u05d9\u05dd \u05d4\u05e9\u05d1\u05d5\u05e2"})}),Object(m.jsxs)(v,{title:"\u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d5\u05ea",children:[Object(m.jsx)(N,{label:"\u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05e9\u05d4\u05e9\u05ea\u05ea\u05e4\u05ea",value:r}),Object(m.jsx)(N,{label:"\u05db\u05de\u05d5\u05ea \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05e2\u05ea\u05d9\u05d3\u05d9\u05d9\u05dd",value:c.length}),Object(m.jsx)(N,{label:"\u05de\u05de\u05d5\u05e6\u05e2 \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05d1\u05e9\u05d1\u05d5\u05e2",value:n})]}),Object(m.jsxs)(v,{title:"\u05e4\u05e8\u05d8\u05d9 \u05de\u05e0\u05d5\u05d9",children:[Object(m.jsx)(w,{label:"\u05e1\u05d5\u05d2 \u05de\u05e0\u05d5\u05d9",value:(null===e||void 0===e?void 0:e.membershipType)||"\u05e8\u05d2\u05d9\u05dc"}),Object(m.jsx)(w,{label:"\u05ea\u05d0\u05e8\u05d9\u05da \u05d4\u05e6\u05d8\u05e8\u05e4\u05d5\u05ea",value:(null===e||void 0===e?void 0:e.joinDate)||"\u05dc\u05d0 \u05d6\u05de\u05d9\u05df"})]})]})]})};const k=async e=>(await Object(d.h)(Object(d.d)(j,e))).docs.map((e=>Object(l.a)({id:e.id},e.data()))),L=async(e,t)=>{const s=await Object(d.a)(Object(d.d)(j,e),t);return Object(l.a)({id:s.id},t)},C=async(e,t)=>{await Object(d.e)(Object(d.f)(j,e,t))},D=async(e,t,s)=>{const a=Object(d.f)(j,"Lessons",e),c=Object(d.f)(j,"Users",t.phone),r=s?{waitingList:Object(d.c)(t.phone),registeredParticipants:(t.registeredParticipants||0)+1}:{waitingList:Object(d.b)(t.phone),registeredParticipants:Math.max((t.registeredParticipants||0)-1,0)},n=s?{registeredLessons:Object(d.c)({id:e,date:(new Date).toISOString(),type:"Lesson Type"})}:{registeredLessons:Object(d.b)({id:e,date:(new Date).toISOString()})};await Object(d.k)(a,r),await Object(d.k)(c,n)};var A=e=>{let{lesson:t,isRegistered:s,onRegister:a,onCancel:c}=e;const r=(e=>{const t=new Date(e);return new Intl.DateTimeFormat("he-IL",{weekday:"long",day:"2-digit",month:"2-digit",year:"numeric"}).format(t)})(t.date);return Object(m.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-4 border border-gray-200 flex flex-col",children:[Object(m.jsx)("div",{className:"text-lg font-semibold text-gray-800",children:r}),Object(m.jsxs)("div",{className:"text-lg font-semibold text-gray-800",children:[t.type," \u05e2\u05dd ",t.instructor]}),Object(m.jsxs)("div",{className:"text-gray-600 mt-1",children:["\u05e9\u05e2\u05d4: ",t.time]}),Object(m.jsxs)("div",{className:"text-gray-600 mt-1",children:["\u05de\u05e9\u05ea\u05ea\u05e4\u05d9\u05dd \u05de\u05e7\u05e1\u05d9\u05de\u05dc\u05d9\u05d9\u05dd: ",t.maxParticipants]}),Object(m.jsxs)("div",{className:"text-gray-600 mt-1",children:["\u05de\u05e9\u05ea\u05ea\u05e4\u05d9\u05dd \u05e8\u05e9\u05d5\u05de\u05d9\u05dd: ",t.registeredParticipants]}),Object(m.jsxs)("div",{className:"text-gray-600 mt-1",children:["\u05de\u05e7\u05d5\u05de\u05d5\u05ea \u05e4\u05e0\u05d5\u05d9\u05d9\u05dd: ",t.maxParticipants-t.registeredParticipants]}),s?Object(m.jsx)("button",{onClick:()=>c(t),className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"\u05d1\u05d8\u05dc \u05d4\u05e8\u05e9\u05de\u05d4"}):Object(m.jsx)("button",{onClick:()=>a(t),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"\u05d4\u05d9\u05e8\u05e9\u05dd \u05dc\u05e9\u05d9\u05e2\u05d5\u05e8"})]})};var M=e=>{let{message:t}=e;return Object(m.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:Object(m.jsx)("span",{className:"block sm:inline",children:t})})};var E=()=>{const[e,t]=Object(a.useState)([]),[s,c]=Object(a.useState)(!0),[r,n]=Object(a.useState)(""),{userData:i}=u();Object(a.useEffect)((()=>{o()}),[]);const o=async()=>{try{const e=await(async()=>(await Object(d.h)(Object(d.d)(j,"Lessons"))).docs.map((e=>Object(l.a)({id:e.id},e.data()))))(),s=new Date,a=e.map((e=>Object(l.a)(Object(l.a)({},e),{},{isActive:new Date("".concat(e.date," ").concat(e.time))>=s})));t(a.filter((e=>e.isActive)))}catch(r){n("\u05d0\u05d9\u05e8\u05e2\u05d4 \u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05dc\u05d5\u05d7 \u05d4\u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd")}finally{c(!1)}},b=async e=>{try{await D(e.id,i,!0),o()}catch(r){n("\u05d0\u05d9\u05e8\u05e2\u05d4 \u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05e8\u05e9\u05de\u05d4 \u05dc\u05e9\u05d9\u05e2\u05d5\u05e8")}},x=async e=>{try{await D(e.id,i,!1),o()}catch(r){n("\u05d0\u05d9\u05e8\u05e2\u05d4 \u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d1\u05d9\u05d8\u05d5\u05dc \u05d4\u05d4\u05e8\u05e9\u05de\u05d4 \u05dc\u05e9\u05d9\u05e2\u05d5\u05e8")}};return Object(m.jsxs)("div",{className:"container mx-auto p-4",children:[Object(m.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\u05dc\u05d5\u05d7 \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd"}),r&&Object(m.jsx)(M,{message:r}),s?Object(m.jsx)("div",{className:"text-center text-gray-500",children:"\u05d8\u05d5\u05e2\u05df..."}):e.map((e=>Object(m.jsx)(A,{lesson:e,isRegistered:e.waitingList.includes(i.phone),onRegister:b,onCancel:x},e.id)))]})};var T=e=>{let{lesson:t}=e;return Object(m.jsx)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:Object(m.jsxs)("div",{className:"flex-1",children:[Object(m.jsx)("h3",{className:"font-bold text-lg",children:t.title||"".concat(t.type," - ").concat(t.instructor)}),Object(m.jsxs)("p",{className:"text-gray-600",children:["\u05de\u05d3\u05e8\u05d9\u05da: ",t.instructor]}),Object(m.jsxs)("p",{className:"text-gray-600",children:["\u05ea\u05d0\u05e8\u05d9\u05da: ",t.date]}),Object(m.jsxs)("p",{className:"text-gray-600",children:["\u05e9\u05e2\u05d4: ",t.time]})]})})};var P=()=>{const{userData:e}=u(),[t,s]=Object(a.useState)([]),[c,r]=Object(a.useState)(!0),[n,l]=Object(a.useState)(""),i=new Date,o=Object(a.useCallback)((async()=>{try{const t=(await(async e=>{const t=Object(d.f)(j,"Users",e),s=await Object(d.g)(t);return s.exists()&&s.data().registeredLessons||[]})(e.phone)).filter((e=>new Date(e.date)>i));s(t)}catch(n){console.error("Error fetching registered lessons:",n),l("\u05d0\u05d9\u05e8\u05e2\u05d4 \u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05d4\u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd")}finally{r(!1)}}),[e,i]);return Object(a.useEffect)((()=>{null!==e&&void 0!==e&&e.phone&&o()}),[o]),e?Object(m.jsxs)("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[n&&Object(m.jsx)(M,{message:n}),Object(m.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[Object(m.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc \u05de\u05e9\u05ea\u05de\u05e9"}),Object(m.jsxs)("div",{className:"space-y-4",children:[Object(m.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[Object(m.jsx)("span",{className:"text-gray-600 ml-2",children:"\ud83d\udc64"}),Object(m.jsx)("span",{className:"text-gray-600",children:"\u05e9\u05dd: "}),Object(m.jsx)("span",{className:"font-medium mr-2",children:e.name})]}),Object(m.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[Object(m.jsx)("span",{className:"text-gray-600 ml-2",children:"\ud83d\udcf1"}),Object(m.jsx)("span",{className:"text-gray-600",children:"\u05d8\u05dc\u05e4\u05d5\u05df: "}),Object(m.jsx)("span",{className:"font-medium mr-2",dir:"ltr",children:e.phone})]}),Object(m.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[Object(m.jsx)("span",{className:"text-gray-600 ml-2",children:"\ud83d\udee1\ufe0f"}),Object(m.jsx)("span",{className:"text-gray-600",children:"\u05e1\u05d5\u05d2 \u05de\u05e9\u05ea\u05de\u05e9: "}),Object(m.jsx)("span",{className:"font-medium mr-2",children:e.isAdmin?"\u05de\u05e0\u05d4\u05dc":"\u05de\u05e9\u05ea\u05de\u05e9 \u05e8\u05d2\u05d9\u05dc"})]}),Object(m.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[Object(m.jsx)("span",{className:"text-gray-600 ml-2",children:"\ud83d\udee1\ufe0f"}),Object(m.jsx)("span",{className:"text-gray-600",children:"\u05e1\u05d5\u05d2 \u05de\u05e0\u05d5\u05d9: "}),Object(m.jsx)("span",{className:"font-medium mr-2",children:e.membership||"\u05dc\u05d0 \u05de\u05d5\u05d2\u05d3\u05e8"})]})]})]}),Object(m.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[Object(m.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\u05d4\u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05e9\u05e0\u05e8\u05e9\u05de\u05ea \u05d0\u05dc\u05d9\u05d4\u05dd"}),c?Object(m.jsx)("p",{className:"text-center text-gray-500 py-4",children:"\u05d8\u05d5\u05e2\u05df \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd..."}):t.length>0?Object(m.jsx)("div",{className:"space-y-4",children:t.map(((e,t)=>Object(m.jsx)(T,{lesson:e},t)))}):Object(m.jsx)("p",{className:"text-center text-gray-500 py-4",children:"\u05dc\u05d0 \u05e0\u05e8\u05e9\u05de\u05ea \u05dc\u05e9\u05d5\u05dd \u05e9\u05d9\u05e2\u05d5\u05e8"})]})]}):Object(m.jsx)("div",{className:"flex items-center justify-center h-64",children:Object(m.jsx)("div",{className:"text-gray-500",children:"\u05d8\u05d5\u05e2\u05df..."})})},U=s(7),Y=s.n(U),I=s(49);const R=Object(a.createContext)();var X=s(70);s(238);const z=Object(X.b)(Y.a);var F=()=>{const{lessons:e,addLesson:t,removeLesson:s,clearAllLessons:c}=Object(a.useContext)(R),[r,n]=Object(a.useState)([]),i=(()=>{const[e,t]=Object(a.useState)(window.innerWidth<1024);return Object(a.useEffect)((()=>{const e=()=>t(window.innerWidth<1024);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e})(),[o,b]=Object(a.useState)([]),[x,h]=Object(a.useState)(!1),[u,g]=Object(a.useState)(!1),[p,O]=Object(a.useState)({instructor:"",type:"",maxParticipants:0,date:"",time:""});Object(a.useEffect)((()=>{let s=!0;return(async()=>{try{const a=await Object(d.h)(Object(d.d)(j,"LessonTypes"));if(!s)return;const c=a.docs.map((e=>Object(l.a)({id:e.id},e.data())));n(c);const r=Object(d.d)(j,"Lessons"),i=await Object(d.h)(r);if(!s)return;const o=i.docs.map((e=>{const t=Object(l.a)({id:e.id},e.data());return console.log("Fetched lesson:",{id:t.id,date:t.date,time:t.time,isActive:t.isActive,type:t.type}),t}));console.log("Current lessons in context:",e.map((e=>({id:e.id,date:e.date,time:e.time,isActive:e.isActive,type:e.type}))));const b=e.map((e=>e.id));o.forEach((e=>{e.id&&!b.includes(e.id)&&(console.log("Adding new lesson to context:",{id:e.id,date:e.date,time:e.time,isActive:e.isActive,type:e.type}),t(e))})),console.log("Total lessons after update:",e.length),console.log("Active lessons:",e.filter((e=>e.isActive)).length),console.log("Historical lessons:",e.filter((e=>!e.isActive)).length)}catch(a){console.error("Error fetching data:",a)}})(),()=>{s=!1}}),[e]);const{currentLessons:f,pastLessons:v}=e.reduce(((e,t)=>(t.isActive?e.currentLessons.push(t):e.pastLessons.push(t),e)),{currentLessons:[],pastLessons:[]}),y=e=>e.reduce(((e,t)=>{const s=t.date;return e[s]||(e[s]=[]),e[s].push(t),e}),{}),N=y(f),w=y(v),S=e=>{e.isActive?window.confirm("\u05d4\u05d0\u05dd \u05d0\u05ea\u05d4 \u05d1\u05d8\u05d5\u05d7 \u05e9\u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05de\u05d7\u05d5\u05e7 \u05d0\u05ea \u05d4\u05e9\u05d9\u05e2\u05d5\u05e8?")&&s(e.id):alert("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05de\u05d7\u05d5\u05e7 \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05e9\u05db\u05d1\u05e8 \u05d4\u05ea\u05e7\u05d9\u05d9\u05de\u05d5")},k=e.sort(((e,t)=>Y()("".concat(e.date,"T").concat(e.time)).diff(Y()("".concat(t.date,"T").concat(t.time))))).map((e=>{if(!e.id)return console.error("Lesson ID is missing:",e),null;const t=new Date("".concat(e.date,"T").concat(e.time)),s=new Date(t);return s.setMinutes(s.getHours()+35),{id:e.id,title:"".concat(e.type," - ").concat(e.instructor),start:t,end:s,isPast:!e.isActive,lesson:e}})).filter(Boolean),L=e=>{let{lesson:t,isPast:s}=e;return Object(m.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-4 border ".concat(s?"border-gray-300 opacity-70":"border-gray-200"," flex flex-col"),children:[Object(m.jsxs)("div",{className:"text-lg font-semibold text-gray-800",children:[t.type," \u05e2\u05dd ",t.instructor]}),Object(m.jsxs)("div",{className:"text-gray-600 mt-1",children:["\u05e9\u05e2\u05d4: ",t.time]}),!s&&Object(m.jsx)("button",{onClick:()=>S(t),className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"\u05de\u05d7\u05e7"})]})};return Object(m.jsxs)("div",{className:"container mx-auto p-4",children:[Object(m.jsx)("h1",{className:"text-xl font-bold mb-4",children:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd"}),i?Object(m.jsxs)("div",{className:"mb-4 space-y-2",children:[Object(m.jsx)("button",{onClick:()=>h(!0),className:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg",children:"\u05d4\u05d2\u05d3\u05e8 \u05e9\u05d9\u05e2\u05d5\u05e8"}),Object(m.jsx)("button",{onClick:()=>g(!u),className:"w-full px-4 py-2 bg-gray-500 text-white rounded-lg",children:u?"\u05d4\u05e6\u05d2 \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05e2\u05ea\u05d9\u05d3\u05d9\u05d9\u05dd":"\u05d4\u05e6\u05d2 \u05d4\u05d9\u05e1\u05d8\u05d5\u05e8\u05d9\u05d9\u05ea \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd"})]}):Object(m.jsxs)("div",{className:"mb-4 flex justify-end space-x-4",children:[Object(m.jsx)("button",{onClick:()=>{window.confirm("\u05d4\u05d0\u05dd \u05d0\u05ea\u05d4 \u05d1\u05d8\u05d5\u05d7 \u05e9\u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05de\u05d7\u05d5\u05e7 \u05d0\u05ea \u05db\u05dc \u05d4\u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05d4\u05e2\u05ea\u05d9\u05d3\u05d9\u05d9\u05dd?")&&f.forEach((e=>s(e.id)))},className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"\u05de\u05d7\u05e7 \u05d0\u05ea \u05db\u05dc \u05d4\u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05d4\u05e2\u05ea\u05d9\u05d3\u05d9\u05d9\u05dd"}),Object(m.jsx)("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-lg",children:"\u05d4\u05d2\u05d3\u05e8 \u05e9\u05d9\u05e2\u05d5\u05e8"})]}),i?Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"mb-4",children:Object(m.jsxs)("div",{className:"flex justify-between items-center",children:[Object(m.jsx)("h2",{className:"text-lg font-semibold",children:u?"\u05d4\u05d9\u05e1\u05d8\u05d5\u05e8\u05d9\u05d9\u05ea \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd":"\u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05e7\u05e8\u05d5\u05d1\u05d9\u05dd"}),Object(m.jsx)("span",{className:"text-sm text-gray-500",children:"".concat(u?Object.keys(w).length:Object.keys(N).length," \u05d9\u05de\u05d9\u05dd")})]})}),u?Object.keys(w).sort(((e,t)=>Y()(t).diff(Y()(e)))).map((e=>{var t;return Object(m.jsxs)("div",{className:"mb-6 bg-gray-50 p-4 rounded-lg",children:[Object(m.jsx)("h3",{className:"text-lg font-semibold mb-2 text-gray-700",children:Y()(e).format("DD/MM/YYYY")}),Object(m.jsx)("div",{className:"grid grid-cols-1 gap-4",children:null===(t=w[e])||void 0===t?void 0:t.sort(((e,t)=>Y()("".concat(e.date,"T").concat(e.time)).diff(Y()("".concat(t.date,"T").concat(t.time))))).map((e=>Object(m.jsx)(L,{lesson:e,isPast:!0},e.id)))})]},e)})):Object.keys(N).sort(((e,t)=>Y()(e).diff(Y()(t)))).map((e=>{var t;return Object(m.jsxs)("div",{className:"mb-6 bg-blue-50 p-4 rounded-lg",children:[Object(m.jsx)("h3",{className:"text-lg font-semibold mb-2 text-blue-900",children:Y()(e).format("DD/MM/YYYY")}),Object(m.jsx)("div",{className:"grid grid-cols-1 gap-4",children:null===(t=N[e])||void 0===t?void 0:t.sort(((e,t)=>Y()("".concat(e.date,"T").concat(e.time)).diff(Y()("".concat(t.date,"T").concat(t.time))))).map((e=>Object(m.jsx)(L,{lesson:e,isPast:!1},e.id)))})]},e)})),(u&&0===Object.keys(w).length||!u&&0===Object.keys(N).length)&&Object(m.jsx)("div",{className:"text-center py-8 text-gray-500",children:u?"\u05d0\u05d9\u05df \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05d1\u05d4\u05d9\u05e1\u05d8\u05d5\u05e8\u05d9\u05d4":"\u05d0\u05d9\u05df \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05e7\u05e8\u05d5\u05d1\u05d9\u05dd"})]}):Object(m.jsx)(X.a,{localizer:z,selectable:!0,onSelectSlot:e=>{let{start:t,end:s}=e;if(!Y()(t).isAfter(Y()()))return void alert("\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05d5\u05e1\u05d9\u05e3 \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05d1\u05ea\u05d0\u05e8\u05d9\u05db\u05d9\u05dd \u05e9\u05e2\u05d1\u05e8\u05d5");const a=[];let c=new Date(t);for(;c<s;){const e=new Date(c);e.setHours(c.getHours()+1),a.push({start:c,end:e}),c=e}b((e=>[...e.filter((e=>!a.some((t=>t.start.getTime()===e.start.getTime())))),...a.filter((t=>!e.some((e=>e.start.getTime()===t.start.getTime()))))]))},events:k,style:{height:"calc(100vh - 200px)",width:"100%",fontSize:"8px"},defaultView:"week",views:["month","week","day"],step:60,timeslots:1,min:new Date(1970,1,1,8,0,0),max:new Date(1970,1,1,23,0,0),messages:{month:"\u05d7\u05d5\u05d3\u05e9",week:"\u05e9\u05d1\u05d5\u05e2",day:"\u05d9\u05d5\u05dd",today:"\u05d4\u05d9\u05d5\u05dd",previous:"\u05e7\u05d5\u05d3\u05dd",next:"\u05d4\u05d1\u05d0"},eventPropGetter:e=>({style:{backgroundColor:o.some((t=>t.start.getTime()===e.start.getTime()))?"#cce5ff":"#93C5FD",color:"#1E3A8A",border:"1px solid #60A5FA",borderLeft:"1px solid #3B82F6",display:"flex-inline",flexDirection:"column",justifyContent:"space-between",padding:"1px",marginLeft:"5px"}}),components:{event:e=>{var t;let{event:s}=e;return Object(m.jsxs)("div",{style:{display:"flex",gap:"5px",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"2px 4px"},children:[Object(m.jsx)("strong",{children:s.title}),(null===(t=s.lesson)||void 0===t?void 0:t.isActive)&&Object(m.jsx)("button",{onClick:e=>{e.stopPropagation(),S(s.lesson)},className:"bg-red-500 text-white  px-2 py-1 rounded hover:bg-red-600",children:"\u05de\u05d7\u05e7"})]})},timeSlotWrapper:e=>{let{children:t,value:s}=e;const a=(e=>{const t=o.some((t=>{let{start:s}=t;return s.getTime()===e.getTime()}));return{style:{backgroundColor:t?"#cce5ff":"white",border:t?"2px solid #007bff":"1px solid #ccc",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"}}})(s);return Object(m.jsx)("div",{style:a.style,children:t})}}}),x&&Object(m.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center",children:Object(m.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[Object(m.jsx)("h2",{className:"text-lg font-bold mb-4",children:"\u05d4\u05d5\u05e1\u05e3 \u05e9\u05d9\u05e2\u05d5\u05e8"}),Object(m.jsx)("div",{className:"mb-4",children:Object(m.jsx)("input",{type:"text",placeholder:"\u05e9\u05dd \u05d4\u05de\u05d3\u05e8\u05d9\u05da",value:p.instructor,onChange:e=>O(Object(l.a)(Object(l.a)({},p),{},{instructor:e.target.value})),className:"w-full p-2 border rounded-lg",required:!0})}),Object(m.jsx)("div",{className:"mb-4",children:Object(m.jsxs)("select",{value:p.type,onChange:e=>O(Object(l.a)(Object(l.a)({},p),{},{type:e.target.value})),className:"w-full p-2 border rounded-lg",children:[Object(m.jsx)("option",{value:"",disabled:!0,children:"\u05d1\u05d7\u05e8 \u05e1\u05d5\u05d2 \u05e9\u05d9\u05e2\u05d5\u05e8"}),r.map((e=>Object(m.jsx)("option",{value:e.type,children:e.type},e.id)))]})}),Object(m.jsx)("div",{className:"mb-4",children:Object(m.jsx)("input",{type:"number",placeholder:"\u05de\u05e1\u05e4\u05e8 \u05de\u05e9\u05ea\u05ea\u05e4\u05d9\u05dd \u05de\u05e7\u05e1\u05d9\u05de\u05dc\u05d9",value:p.maxParticipants,onChange:e=>O(Object(l.a)(Object(l.a)({},p),{},{maxParticipants:parseInt(e.target.value)||0})),className:"w-full p-2 border rounded-lg",min:"1",required:!0})}),i&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"mb-4",children:Object(m.jsx)("input",{type:"date",placeholder:"\u05ea\u05d0\u05e8\u05d9\u05da \u05d4\u05e9\u05d9\u05e2\u05d5\u05e8",value:p.date,onChange:e=>O(Object(l.a)(Object(l.a)({},p),{},{date:e.target.value})),min:Y()().format("YYYY-MM-DD"),className:"w-full p-2 border rounded-lg",required:!0})}),Object(m.jsx)("div",{className:"mb-4",children:Object(m.jsx)("input",{type:"time",placeholder:"\u05e9\u05e2\u05ea \u05d4\u05e9\u05d9\u05e2\u05d5\u05e8",value:p.time,onChange:e=>O(Object(l.a)(Object(l.a)({},p),{},{time:e.target.value})),className:"w-full p-2 border rounded-lg",required:!0})})]}),Object(m.jsxs)("div",{className:"flex justify-end space-x-2",children:[Object(m.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"\u05d1\u05d9\u05d8\u05d5\u05dc"}),Object(m.jsx)("button",{onClick:async()=>{if(""===p.instructor.trim()||""===p.type.trim()||p.maxParticipants<=0||i&&(""===p.date||""===p.time))return void alert("\u05d0\u05e0\u05d0 \u05de\u05dc\u05d0 \u05d0\u05ea \u05db\u05dc \u05d4\u05e9\u05d3\u05d5\u05ea \u05d1\u05d8\u05d5\u05e4\u05e1");const s=i?[{date:p.date,time:p.time,instructor:p.instructor,type:p.type,maxParticipants:p.maxParticipants.toString(),registeredParticipants:0,createdAt:Y()().toISOString(),title:"".concat(p.type," - ").concat(p.instructor),isActive:Y()("".concat(p.date,"T").concat(p.time)).isAfter(Y()()),waitingList:[]}]:o.map((e=>({date:Y()(e.start).format("YYYY-MM-DD"),time:Y()(e.start).format("HH:mm"),instructor:p.instructor,type:p.type,maxParticipants:p.maxParticipants.toString(),registeredParticipants:0,createdAt:Y()().toISOString(),title:"".concat(p.type," - ").concat(p.instructor),isActive:!0,waitingList:[]})));try{const a=s.filter((t=>{return s=t.date,a=t.time,!e.some((e=>e.date===s&&e.time===a));var s,a}));if(0===a.length)return void alert("\u05db\u05dc \u05d4\u05e9\u05e2\u05d5\u05ea \u05e9\u05e0\u05d1\u05d7\u05e8\u05d5 \u05db\u05d1\u05e8 \u05ea\u05e4\u05d5\u05e1\u05d5\u05ea");a.length<s.length&&alert("\u05d7\u05dc\u05e7 \u05de\u05d4\u05e9\u05e2\u05d5\u05ea \u05e9\u05e0\u05d1\u05d7\u05e8\u05d5 \u05db\u05d1\u05e8 \u05ea\u05e4\u05d5\u05e1\u05d5\u05ea. \u05e8\u05e7 \u05d4\u05e9\u05e2\u05d5\u05ea \u05d4\u05e4\u05e0\u05d5\u05d9\u05d5\u05ea \u05d9\u05ea\u05d5\u05d5\u05e1\u05e4\u05d5.");for(const e of a){const s=await Object(d.a)(Object(d.d)(j,"Lessons"),e);console.log("Added new lesson:",Object(l.a)({id:s.id},e)),t(Object(l.a)({id:s.id},e))}b([]),O({instructor:"",type:"",maxParticipants:0,date:"",time:""}),h(!1)}catch(a){console.error("Error adding lessons:",a),alert("\u05d0\u05d9\u05e8\u05e2\u05d4 \u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05d5\u05e1\u05e4\u05ea \u05d4\u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd")}},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"\u05d4\u05d5\u05e1\u05e3"})]})]})})]})};var B=()=>{const[e,t]=Object(a.useState)({name:"",phone:"",isAdmin:!1,membership:"",remainingLessons:0,registeredLessons:[],completedLessons:0,joinDate:(new Date).toISOString().split("T")[0]}),[s,c]=Object(a.useState)(""),[r,n]=Object(a.useState)(""),[i,o]=Object(a.useState)(""),[b,x]=Object(a.useState)(!1),[h,g]=Object(a.useState)(null),[p,O]=Object(a.useState)([])||{},{refreshUserData:f}=u()||{};Object(a.useEffect)((()=>{v()}),[]);const v=async()=>{try{const e=await(async()=>(await Object(d.h)(Object(d.d)(j,"Users"))).docs.map((e=>Object(l.a)({id:e.id},e.data()))))();O(e)}catch(e){y("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d8\u05e2\u05d9\u05e0\u05ea \u05d4\u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd")}},y=e=>{console.error(e),o(e)},N=async e=>{if(window.confirm("\u05d4\u05d0\u05dd \u05d0\u05ea\u05d4 \u05d1\u05d8\u05d5\u05d7 \u05e9\u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05de\u05d7\u05d5\u05e7 \u05d0\u05ea \u05d4\u05de\u05e9\u05ea\u05de\u05e9?"))try{await(async e=>{const t=Object(d.f)(j,"Users",e);await Object(d.e)(t)})(e),O((t=>t.filter((t=>t.id!==e))))}catch(t){y("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05de\u05d7\u05d9\u05e7\u05ea \u05d4\u05de\u05e9\u05ea\u05de\u05e9")}},w=()=>{t({name:"",phone:"",isAdmin:!1,membership:"",remainingLessons:0,registeredLessons:[],completedLessons:0,joinDate:(new Date).toISOString().split("T")[0]})},S=p.filter((e=>(!s||e.name.includes(s)||e.phone.includes(s))&&(!r||e.membership===r)));return Object(m.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[Object(m.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4",children:[Object(m.jsx)("input",{type:"text",placeholder:"\u05d7\u05e4\u05e9 \u05dc\u05e4\u05d9 \u05e9\u05dd \u05d0\u05d5 \u05d8\u05dc\u05e4\u05d5\u05df",value:s,onChange:e=>c(e.target.value),className:"p-2 border rounded-lg w-full sm:w-1/2 mb-2 sm:mb-0"}),Object(m.jsx)("button",{onClick:()=>{w(),x(!0)},className:"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 mb-4 w-full sm:w-auto",children:"\u05d4\u05d5\u05e1\u05e3 \u05de\u05e9\u05ea\u05de\u05e9"})]}),Object(m.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[Object(m.jsx)("h2",{className:"text-lg font-bold mb-4",children:"\u05e8\u05e9\u05d9\u05de\u05ea \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd"}),Object(m.jsx)("ul",{className:"space-y-3",children:S.map((e=>Object(m.jsxs)("li",{className:"flex justify-between items-center p-3 rounded-md bg-gray-100",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{children:e.name}),Object(m.jsx)("p",{children:e.phone})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{onClick:()=>{g(e),x(!0)},className:"bg-yellow-500 text-white px-3 py-1 rounded-md hover:bg-yellow-600",children:"\u05e2\u05e8\u05d5\u05da"}),Object(m.jsx)("button",{onClick:()=>N(e.id),className:"bg-red-500 text-white px-3 py-1 rounded-md hover:bg-red-600",children:"\u05de\u05d7\u05e7"})]})]},e.id)))})]}),b&&Object(m.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center",children:Object(m.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg max-w-md w-full",children:[Object(m.jsx)("h2",{className:"text-lg font-bold mb-4",children:h?"\u05e2\u05e8\u05d5\u05da \u05de\u05e9\u05ea\u05de\u05e9":"\u05d4\u05d5\u05e1\u05e3 \u05de\u05e9\u05ea\u05de\u05e9"}),i&&Object(m.jsx)("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4",children:i}),Object(m.jsxs)("div",{className:"space-y-3",children:[Object(m.jsx)("input",{type:"text",name:"name",placeholder:"\u05e9\u05dd \u05de\u05dc\u05d0",value:h?h.name:e.name,onChange:e=>h?g((t=>Object(l.a)(Object(l.a)({},t),{},{name:e.target.value}))):t((t=>Object(l.a)(Object(l.a)({},t),{},{name:e.target.value}))),className:"w-full p-2 border rounded-md"}),Object(m.jsx)("input",{type:"tel",name:"phone",placeholder:"\u05d8\u05dc\u05e4\u05d5\u05df",value:h?h.phone:e.phone,onChange:e=>h?g((t=>Object(l.a)(Object(l.a)({},t),{},{phone:e.target.value}))):t((t=>Object(l.a)(Object(l.a)({},t),{},{phone:e.target.value}))),className:"w-full p-2 border rounded-md"}),Object(m.jsxs)("select",{name:"membership",value:h?h.membership:e.membership,onChange:e=>{const s=e.target.value;h?g((e=>Object(l.a)(Object(l.a)({},e),{},{membership:s}))):t((e=>Object(l.a)(Object(l.a)({},e),{},{membership:s})))},className:"w-full p-2 border rounded-md",children:[Object(m.jsx)("option",{value:"",children:"\u05d1\u05d7\u05e8 \u05de\u05e0\u05d5\u05d9"}),Object(m.jsx)("option",{value:"\u05db\u05e8\u05d8\u05d9\u05e1\u05d9\u05d9\u05d4",children:"\u05db\u05e8\u05d8\u05d9\u05e1\u05d9\u05d9\u05d4"}),Object(m.jsx)("option",{value:"\u05de\u05e0\u05d5\u05d9 \u05d7\u05d5\u05d3\u05e9\u05d9",children:"\u05de\u05e0\u05d5\u05d9 \u05d7\u05d5\u05d3\u05e9\u05d9"})]}),Object(m.jsxs)("div",{className:"flex justify-end space-x-2 rtl:space-x-reverse",children:[Object(m.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-gray-500 text-white rounded-md",children:"\u05d1\u05d9\u05d8\u05d5\u05dc"}),Object(m.jsx)("button",{onClick:h?async()=>{if(h.name&&h.phone&&h.membership)try{await(async(e,t)=>{const s=Object(d.f)(j,"Users",e);await Object(d.k)(s,t)})(h.id,h),O((e=>e.map((e=>e.id===h.id?Object(l.a)({},h):e)))),g(null),x(!1),o("")}catch(i){console.error("Error editing user:",i),o("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05e2\u05d3\u05db\u05d5\u05df \u05d4\u05de\u05e9\u05ea\u05de\u05e9")}else o("\u05d0\u05e0\u05d0 \u05de\u05dc\u05d0 \u05d0\u05ea \u05db\u05dc \u05d4\u05e9\u05d3\u05d5\u05ea \u05d4\u05d7\u05d5\u05d1\u05d4")}:async()=>{if(e.name&&e.phone&&e.membership)try{await(async e=>{const t=Object(d.f)(j,"Users",e.phone);await Object(d.j)(t,e)})(e),O((t=>[...t,Object(l.a)({id:e.phone},e)])),x(!1),o(""),w()}catch(t){y("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05d5\u05e1\u05e4\u05ea \u05d4\u05de\u05e9\u05ea\u05de\u05e9")}else y("\u05d0\u05e0\u05d0 \u05de\u05dc\u05d0 \u05d0\u05ea \u05db\u05dc \u05d4\u05e9\u05d3\u05d5\u05ea \u05d4\u05d7\u05d5\u05d1\u05d4")},className:"px-4 py-2 bg-green-500 text-white rounded-md",children:h?"\u05e9\u05de\u05d5\u05e8 \u05e9\u05d9\u05e0\u05d5\u05d9\u05d9\u05dd":"\u05d4\u05d5\u05e1\u05e3"})]})]})]})})]})};const H=e=>{let{items:t,onDelete:s}=e;return Object(m.jsx)("ul",{className:"mt-4 space-y-2",children:t.map((e=>Object(m.jsxs)("li",{className:"flex justify-between items-center border p-2 rounded",children:[Object(m.jsx)("span",{children:e.name}),Object(m.jsx)("button",{onClick:()=>s(e.id),className:"text-red-500",children:"\u05de\u05d7\u05e7"})]},e.id)))})};var W=()=>{const[e,t]=Object(a.useState)([]),[s,c]=Object(a.useState)(""),[r,n]=Object(a.useState)([]),[l,i]=Object(a.useState)(""),[d,o]=Object(a.useState)(!1),[b,j]=Object(a.useState)("");Object(a.useEffect)((()=>{x(),h()}),[]);const x=async()=>{try{const e=await k("LessonTypes");t(e)}catch(b){u(b)}},h=async()=>{try{const e=await k("Memberships");n(e)}catch(b){u(b)}},u=e=>{console.error(e),j("\u05d0\u05d9\u05e8\u05e2\u05d4 \u05e9\u05d2\u05d9\u05d0\u05d4, \u05e0\u05e1\u05d5 \u05e9\u05d5\u05d1 \u05de\u05d0\u05d5\u05d7\u05e8 \u05d9\u05d5\u05ea\u05e8.")};return Object(m.jsxs)("div",{className:"p-6",children:[Object(m.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05e1\u05d5\u05d2\u05d9 \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05d5\u05de\u05e0\u05d5\u05d9\u05d9\u05dd"}),b&&Object(m.jsx)("div",{className:"bg-red-100 text-red-700 p-4 rounded-lg mb-4",children:b}),Object(m.jsxs)("div",{className:"mb-8",children:[Object(m.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05e1\u05d5\u05d2\u05d9 \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd"}),Object(m.jsx)("input",{type:"text",value:s,onChange:e=>c(e.target.value),placeholder:"\u05d4\u05d5\u05e1\u05e3 \u05e1\u05d5\u05d2 \u05e9\u05d9\u05e2\u05d5\u05e8 \u05d7\u05d3\u05e9",className:"p-2 border rounded w-full"}),Object(m.jsx)("button",{onClick:async()=>{if(s.trim()){o(!0);try{const a=await L("LessonTypes",{name:s.trim()});t([...e,a]),c("")}catch(b){u(b)}finally{o(!1)}}else j("\u05e9\u05dd \u05e1\u05d5\u05d2 \u05e9\u05d9\u05e2\u05d5\u05e8 \u05d0\u05d9\u05e0\u05d5 \u05d9\u05db\u05d5\u05dc \u05dc\u05d4\u05d9\u05d5\u05ea \u05e8\u05d9\u05e7.")},disabled:d||!s.trim(),className:"bg-blue-500 text-white px-4 py-2 rounded mt-2 ".concat(d?"opacity-50":""),children:d?"\u05de\u05d5\u05e1\u05d9\u05e3...":"\u05d4\u05d5\u05e1\u05e3 \u05e1\u05d5\u05d2 \u05e9\u05d9\u05e2\u05d5\u05e8"}),Object(m.jsx)(H,{items:e,onDelete:async s=>{o(!0);try{await C("LessonTypes",s),t(e.filter((e=>e.id!==s)))}catch(b){u(b)}finally{o(!1)}}})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05de\u05e0\u05d5\u05d9\u05d9\u05dd"}),Object(m.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"\u05d4\u05d5\u05e1\u05e3 \u05de\u05e0\u05d5\u05d9 \u05d7\u05d3\u05e9",className:"p-2 border rounded w-full"}),Object(m.jsx)("button",{onClick:async()=>{if(l.trim()){o(!0);try{const e=await L("Memberships",{name:l.trim()});n([...r,e]),i("")}catch(b){u(b)}finally{o(!1)}}else j("\u05e9\u05dd \u05de\u05e0\u05d5\u05d9 \u05d0\u05d9\u05e0\u05d5 \u05d9\u05db\u05d5\u05dc \u05dc\u05d4\u05d9\u05d5\u05ea \u05e8\u05d9\u05e7.")},disabled:d||!l.trim(),className:"bg-green-500 text-white px-4 py-2 rounded mt-2 ".concat(d?"opacity-50":""),children:d?"\u05de\u05d5\u05e1\u05d9\u05e3...":"\u05d4\u05d5\u05e1\u05e3 \u05de\u05e0\u05d5\u05d9"}),Object(m.jsx)(H,{items:r,onDelete:async e=>{o(!0);try{await C("Memberships",e),n(r.filter((t=>t.id!==e)))}catch(b){u(b)}finally{o(!1)}}})]})]})};const q=e=>{let{passed:t,failed:s,total:a}=e;return Object(m.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[Object(m.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[Object(m.jsx)("div",{className:"text-lg font-bold",children:a}),Object(m.jsx)("div",{className:"text-sm text-gray-600",children:'\u05e1\u05d4"\u05db \u05d1\u05d3\u05d9\u05e7\u05d5\u05ea'})]}),Object(m.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[Object(m.jsx)("div",{className:"text-lg font-bold text-green-700",children:t}),Object(m.jsx)("div",{className:"text-sm text-green-600",children:"\u05e2\u05d1\u05e8\u05d5"})]}),Object(m.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg text-center",children:[Object(m.jsx)("div",{className:"text-lg font-bold text-red-700",children:s}),Object(m.jsx)("div",{className:"text-sm text-red-600",children:"\u05e0\u05db\u05e9\u05dc\u05d5"})]})]})},J=e=>{var t;let{suite:s}=e;const a="passed"===s.status;return Object(m.jsxs)("div",{className:"border rounded-lg p-4 mb-4",children:[Object(m.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[Object(m.jsx)("h3",{className:"font-bold",children:(c=s.name,c.split(/(\\|\/)/).pop())}),Object(m.jsx)("span",{className:"px-2 py-1 text-sm rounded-full ".concat(a?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:a?"\u05e2\u05d1\u05e8":"\u05e0\u05db\u05e9\u05dc"})]}),null===(t=s.assertionResults)||void 0===t?void 0:t.map(((e,t)=>{var s;return Object(m.jsxs)("div",{className:"border-l-4 pl-3 py-2 mb-2 ".concat("passed"===e.status?"border-green-500 bg-green-50":"border-red-500 bg-red-50"),children:[Object(m.jsxs)("div",{className:"flex items-center",children:[Object(m.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 ".concat("passed"===e.status?"bg-green-500":"bg-red-500")}),Object(m.jsx)("span",{children:e.title})]}),"failed"===e.status&&(null===(s=e.failureMessages)||void 0===s?void 0:s.map(((e,t)=>Object(m.jsx)("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-2 rounded",children:e.split("\n")[0]},t))))]},t)}))]});var c};var K=()=>{var e;const[t,s]=Object(a.useState)(null),[c,r]=Object(a.useState)(!1),[n,i]=Object(a.useState)(null);return Object(m.jsxs)("div",{className:"relative min-h-screen",children:[Object(m.jsx)("div",{className:"sticky top-0 bg-white shadow-md z-50 p-4 border-b",children:Object(m.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[Object(m.jsx)("h1",{className:"text-2xl font-bold",children:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05d1\u05d3\u05d9\u05e7\u05d5\u05ea (Jest)"}),Object(m.jsx)("button",{onClick:async()=>{r(!0),i(null),s(null);try{const e=await fetch("https://your-production-api.com",{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();if(!e.ok)throw new Error(t.details||t.error||"Server error occurred");console.log("Received test results:",t),s(t)}catch(n){console.error("Test run error:",n),i("Error running tests: ".concat(n.message))}finally{r(!1)}},disabled:c,className:"px-4 py-2 rounded-lg ".concat(c?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"," text-white transition-colors"),children:c?"\u05de\u05e8\u05d9\u05e5 \u05d1\u05d3\u05d9\u05e7\u05d5\u05ea...":"\u05d4\u05e8\u05e5 \u05d1\u05d3\u05d9\u05e7\u05d5\u05ea"})]})}),Object(m.jsxs)("div",{className:"container mx-auto p-4",children:[c&&Object(m.jsxs)("div",{className:"flex justify-center items-center p-8",children:[Object(m.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),Object(m.jsx)("span",{className:"mr-3",children:"\u05d8\u05d5\u05e2\u05df \u05d1\u05d3\u05d9\u05e7\u05d5\u05ea..."})]}),n&&Object(m.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6",children:Object(m.jsxs)("div",{className:"flex",children:[Object(m.jsx)("div",{className:"flex-shrink-0",children:Object(m.jsx)("svg",{className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:Object(m.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),Object(m.jsxs)("div",{className:"mr-3",children:[Object(m.jsx)("p",{className:"font-bold",children:"\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05e8\u05e6\u05ea \u05d4\u05d1\u05d3\u05d9\u05e7\u05d5\u05ea"}),Object(m.jsx)("p",{className:"text-sm",children:n})]})]})}),!c&&!n&&t&&Object(m.jsxs)("div",{children:[Object(m.jsx)(q,Object(l.a)({},t?{total:t.numTotalTests||0,passed:t.numPassedTests||0,failed:t.numFailedTests||0}:{total:0,passed:0,failed:0})),Object(m.jsx)("div",{className:"space-y-4",children:null===(e=t.testResults)||void 0===e?void 0:e.map(((e,t)=>Object(m.jsx)(J,{suite:e},t)))})]}),!c&&!n&&!t&&Object(m.jsx)("div",{className:"text-center text-gray-500 p-8",children:Object(m.jsx)("p",{className:"text-lg",children:'\u05dc\u05d7\u05e5 \u05e2\u05dc "\u05d4\u05e8\u05e5 \u05d1\u05d3\u05d9\u05e7\u05d5\u05ea" \u05db\u05d3\u05d9 \u05dc\u05d4\u05ea\u05d7\u05d9\u05dc'})})]})]})},G=s(9);G.f.register(G.e,G.k,G.m,G.j,G.c,G.a,G.q,G.r,G.h);const V={responsive:!0,plugins:{legend:{position:"top"}}};var Q=e=>{let{setCurrentScreen:t}=e;const[s,c]=Object(a.useState)(null),[r,n]=Object(a.useState)(null),[l,i]=Object(a.useState)(null),[o,b]=Object(a.useState)(null),[x,h]=Object(a.useState)(!0),{setLogoUrl:u}=O(),[g,p]=Object(a.useState)("dashboard"),[f,v]=Object(a.useState)(!1),y=(()=>{const[e,t]=Object(a.useState)(window.innerWidth<=768);return Object(a.useEffect)((()=>{const e=()=>t(window.innerWidth<=768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e})();Object(a.useEffect)((()=>{N(),w(),S(),k(),L()}),[]);const N=async()=>{try{const e=(await Object(d.h)(Object(d.d)(j,"Lessons"))).docs.map((e=>e.data())),t=Y()().startOf("week"),s=Y()().startOf("month");let a=0,r=0,n=0;e.forEach((e=>{const c=Y()("".concat(e.date," ").concat(e.time),"YYYY-MM-DD HH:mm");c.isSameOrAfter(t)&&(a+=e.registeredParticipants||0),c.isSameOrAfter(s)&&(r+=e.registeredParticipants||0),e.isActive&&n++})),c({activeLessons:n,weeklyRegistrations:a,monthlyRegistrations:r})}catch(e){console.error("Error loading stats:",e)}finally{h(!1)}},w=async()=>{try{const e=(await Object(d.h)(Object(d.d)(j,"Lessons"))).docs.map((e=>e.data())),t={};[...Array(4)].map(((e,t)=>Y()().subtract(t,"months").format("MMMM"))).reverse().forEach((e=>t[e]=0)),e.forEach((e=>{const s=Y()(e.date,"YYYY-MM-DD").format("MMMM");void 0!==t[s]&&(t[s]+=e.registeredParticipants||0)})),n({labels:Object.keys(t),datasets:[{label:"\u05d4\u05e8\u05e9\u05de\u05d5\u05ea \u05d7\u05d5\u05d3\u05e9\u05d9\u05d5\u05ea",data:Object.values(t),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)",tension:.1}]})}catch(e){console.error("Error loading chart data:",e)}},S=async()=>{try{const e=await Object(d.h)(Object(d.d)(j,"Users")),t=e.docs.map((e=>e.data())).reduce(((e,t)=>{const s=t.type||t.subscriptionType||t.membershipType;return s&&(e[s]=(e[s]||0)+1),e}),{});i({labels:Object.keys(t),datasets:[{label:"\u05e1\u05d5\u05d2\u05d9 \u05de\u05e0\u05d5\u05d9\u05d9\u05dd",data:Object.values(t),backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)"],borderWidth:1}]})}catch(e){console.error("Error loading pie chart data:",e)}},k=async()=>{try{const e=(await Object(d.h)(Object(d.d)(j,"Users"))).docs.map((e=>e.data())),t={};[...Array(4)].map(((e,t)=>Y()().subtract(t,"months").format("MMMM"))).reverse().forEach((e=>t[e]=0)),e.forEach((e=>{const s=Y()(e.joinDate,"YYYY-MM-DD").format("MMMM");void 0!==t[s]&&t[s]++})),b({labels:Object.keys(t),datasets:[{label:"\u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd \u05d7\u05d3\u05e9\u05d9\u05dd",data:Object.values(t),backgroundColor:"rgba(54, 162, 235, 0.6)"}]})}catch(e){console.error("Error loading bar chart data:",e)}},L=async()=>{try{const t=Object(d.f)(j,"StudioInfo","Logo"),s=await Object(d.g)(t);var e;if(s.exists())u(null===(e=s.data())||void 0===e?void 0:e.logoBase64)}catch(t){console.error("Error fetching logo:",t)}},C=async e=>{const t=e.target.files[0];if(t)try{const e=new FileReader;e.onloadend=async()=>{const t=e.result,s=Object(d.f)(j,"StudioInfo","Logo");await Object(d.j)(s,{logoBase64:t}),u(t)},e.readAsDataURL(t)}catch(s){console.error("Error uploading logo:",s),alert("\u05d0\u05d9\u05e8\u05e2\u05d4 \u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05d4\u05e2\u05dc\u05d0\u05ea \u05d4\u05dc\u05d5\u05d2\u05d5")}},D=[{id:"dashboard",label:"\u05dc\u05d5\u05d7 \u05d1\u05e7\u05e8\u05d4",icon:"\ud83d\udcca"},{id:"users",label:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd",icon:"\ud83d\udc65"},{id:"lessons",label:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd",icon:"\ud83d\udcc5"},{id:"manager",label:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05de\u05e0\u05d4\u05dc\u05d9\u05dd",icon:"\u2699\ufe0f"},{id:"tests",label:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05d1\u05d3\u05d9\u05e7\u05d5\u05ea (Jest)",icon:"\ud83e\uddea"}];return Object(m.jsxs)("div",{className:"flex flex-col md:flex-row",children:[Object(m.jsxs)("div",{className:"bg-white shadow-lg md:w-1/4 w-full md:block",children:[Object(m.jsx)("div",{className:"p-4 border-b",children:Object(m.jsx)("h1",{className:"text-xl font-bold",children:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05de\u05e2\u05e8\u05db\u05ea"})}),y?Object(m.jsxs)("div",{className:"relative",children:[Object(m.jsxs)("button",{onClick:()=>v(!f),className:"flex items-center p-3 mx-auto w-full text-gray-600 bg-gray-50 rounded-lg shadow-md md:hidden",children:["\u05ea\u05e4\u05e8\u05d9\u05d8",Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2 transition-transform ".concat(f?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f&&Object(m.jsx)("div",{className:"absolute w-full bg-white shadow-lg z-10 rounded-lg",children:D.map((e=>Object(m.jsxs)("button",{onClick:()=>{p(e.id),v(!1)},className:"flex items-center p-3 w-full text-left ".concat(g===e.id?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50"),children:[Object(m.jsx)("span",{className:"mr-3",children:e.icon}),e.label]},e.id)))})]}):Object(m.jsx)("nav",{className:"p-4 flex flex-col hidden md:block",children:D.map((e=>Object(m.jsxs)("button",{onClick:()=>p(e.id),className:"flex items-center p-3 rounded-lg transition-colors ".concat(g===e.id?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50"),children:[Object(m.jsx)("span",{className:"mr-3",children:e.icon}),e.label]},e.id)))})]}),Object(m.jsx)("div",{className:"flex-1 p-8 overflow-auto",children:(()=>{switch(g){case"dashboard":return Object(m.jsx)("div",{className:"space-y-3",children:Object(m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[Object(m.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[Object(m.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\u05e1\u05d8\u05d8\u05d9\u05e1\u05d8\u05d9\u05e7\u05d5\u05ea \u05de\u05d4\u05d9\u05e8\u05d5\u05ea"}),x?Object(m.jsxs)("div",{className:"animate-pulse space-y-4",children:[Object(m.jsx)("div",{className:"h- bg-gray-200 rounded"}),Object(m.jsx)("div",{className:"h-25 bg-gray-200 rounded"}),Object(m.jsx)("div",{className:"h-25 bg-gray-200 rounded"})]}):Object(m.jsxs)("div",{className:"space-y-4",children:[Object(m.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[Object(m.jsx)("span",{className:"text-gray-600",children:"\u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd"}),Object(m.jsx)("span",{className:"font-semibold",children:(null===s||void 0===s?void 0:s.activeLessons)||0})]}),Object(m.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[Object(m.jsx)("span",{className:"text-gray-600",children:"\u05e0\u05e8\u05e9\u05de\u05d9\u05dd \u05d4\u05e9\u05d1\u05d5\u05e2"}),Object(m.jsx)("span",{className:"font-semibold",children:(null===s||void 0===s?void 0:s.weeklyRegistrations)||0})]}),Object(m.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[Object(m.jsx)("span",{className:"text-gray-600",children:"\u05e0\u05e8\u05e9\u05de\u05d9\u05dd \u05d4\u05d7\u05d5\u05d3\u05e9"}),Object(m.jsx)("span",{className:"font-semibold",children:(null===s||void 0===s?void 0:s.monthlyRegistrations)||0})]})]})]}),Object(m.jsxs)("div",{className:"bg-white rounded-lg p-2 shadow-sm",children:[Object(m.jsxs)("div",{className:"bg-white rounded-lg p-2 shadow-sm",children:[Object(m.jsx)("h2",{className:"text-xl font-bold mb-1",children:"\u05d4\u05e2\u05dc\u05d0\u05ea \u05dc\u05d5\u05d2\u05d5"}),Object(m.jsx)("input",{type:"file",onChange:C,accept:"image/*",className:"file:mr-4 file:py-2 file:px-4\r file:rounded-full file:border-0\r file:text-sm file:font-semibold\r file:bg-blue-50 file:text-blue-700\r hover:file:bg-blue-100"})]}),Object(m.jsx)("h2",{className:"text-xl font-bold mb-2",children:"\u05de\u05d2\u05de\u05ea \u05d4\u05e8\u05e9\u05de\u05d5\u05ea"}),Object(m.jsx)("div",{className:"w-full",children:r&&Object(m.jsx)(I.b,{data:r,options:V})})]}),Object(m.jsxs)("div",{className:"bg-white rounded-lg p-1 shadow-sm",children:[Object(m.jsx)("h2",{className:"text-xl font-bold mb-1",children:"\u05d4\u05ea\u05e4\u05dc\u05d2\u05d5\u05ea \u05e1\u05d5\u05d2\u05d9 \u05de\u05e0\u05d5\u05d9\u05d9\u05dd"}),Object(m.jsx)("div",{className:"h-64 w-64 mx-auto",children:l&&Object(m.jsx)(I.c,{data:l,options:V})})]}),Object(m.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[Object(m.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd \u05d7\u05d3\u05e9\u05d9\u05dd"}),Object(m.jsx)("div",{className:"h-full w-full mx-auto",children:o&&Object(m.jsx)(I.a,{data:o,options:V})})]})]})});case"users":return Object(m.jsx)(B,{});case"lessons":return Object(m.jsx)(F,{});case"manager":return Object(m.jsx)(W,{});case"tests":return Object(m.jsx)(K,{});default:return null}})()})]})};var $=e=>{let{setCurrentScreen:t,currentScreen:s,handleLogout:c}=e;const{logoUrl:r}=O(),{userData:n}=u(),[l,i]=Object(a.useState)(!1),d=Object(a.useRef)(null);Object(a.useEffect)((()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);const o=[{id:"home",label:"\u05d3\u05e3 \u05d4\u05d1\u05d9\u05ea",icon:"\ud83c\udfe0"},{id:"schedule",label:"\u05dc\u05d5\u05d7 \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd",icon:"\ud83d\udcc5"},{id:"profile",label:"\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc",icon:"\ud83d\udc64"}];null!==n&&void 0!==n&&n.isAdmin&&o.push({id:"admin",label:"\u05e0\u05d9\u05d4\u05d5\u05dc",icon:"\u2699\ufe0f"});return Object(m.jsx)("nav",{className:"bg-white shadow-sm",children:Object(m.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:Object(m.jsxs)("div",{className:"flex justify-between items-center h-25",children:[Object(m.jsxs)("div",{className:"flex-shrink-0 flex items-center",children:[Object(m.jsx)("img",{src:r,className:"w-32 h-32 object-contain",alt:"Milan Pilates"}),Object(m.jsx)("span",{className:"mr-2 text-lg font-semibold text-gray-900",children:"Milan Pilates"})]}),Object(m.jsxs)("div",{className:"relative",ref:d,children:[Object(m.jsxs)("button",{onClick:()=>i(!l),className:"flex items-center px-4 py-2 rounded-md text-gray-600 hover:bg-gray-50 focus:outline-none",children:[Object(m.jsx)("span",{className:"text-xl",children:l?"\u2715":"\u2630"}),Object(m.jsx)("span",{className:"mr-2 text-sm font-medium",children:"\u05ea\u05e4\u05e8\u05d9\u05d8"})]}),l&&Object(m.jsx)("div",{className:"absolute left-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50",children:Object(m.jsxs)("div",{className:"py-1",children:[o.map((e=>Object(m.jsxs)("button",{onClick:()=>{return s=e.id,t(s),void i(!1);var s},className:"w-full text-right flex items-center px-4 py-2 text-sm\n                        ".concat(s===e.id?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"),children:[Object(m.jsx)("span",{className:"ml-2",children:e.icon}),e.label]},e.id))),Object(m.jsx)("div",{className:"border-t border-gray-100"}),Object(m.jsxs)("button",{onClick:()=>{c(),i(!1)},className:"w-full text-right flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[Object(m.jsx)("span",{className:"ml-2",children:"\ud83d\udeaa"}),"\u05d4\u05ea\u05e0\u05ea\u05e7\u05d5\u05ea"]})]})})]})]})})})};s(97);const Z=()=>{const[e,t]=Object(a.useState)("login"),{isLoggedIn:s,userData:c,logout:r}=u(),[n,l]=Object(a.useState)(!1),[i,d]=Object(a.useState)([]),o={home:Object(m.jsx)(S,{user:c,lessons:(null===c||void 0===c?void 0:c.registeredLessons)||[]}),schedule:Object(m.jsx)(E,{}),profile:Object(m.jsx)(P,{}),admin:null!==c&&void 0!==c&&c.isAdmin?Object(m.jsx)(Q,{setCurrentScreen:t}):null,lessons:null!==c&&void 0!==c&&c.isAdmin?Object(m.jsx)(F,{}):null,users:null!==c&&void 0!==c&&c.isAdmin?Object(m.jsx)(B,{registeredUsers:i,addUser:e=>{d([...i,e])},deleteUser:e=>{d(i.filter((t=>t.phone!==e)))}}):null,settings:null!==c&&void 0!==c&&c.isAdmin?Object(m.jsx)(Q,{setCurrentScreen:t,activeTab:"settings"}):null};return Object(a.useEffect)((()=>{console.log("\u05d4\u05de\u05e1\u05da \u05d4\u05e0\u05d5\u05db\u05d7\u05d9:",e),console.log("isLoggedIn:",s),console.log("userData:",c)}),[e,s,c]),Object(m.jsxs)("div",{className:"relative min-h-screen bg-gray-100",dir:"rtl",children:[s&&Object(m.jsx)($,{setCurrentScreen:t,currentScreen:e,handleLogout:r,userData:c,menuOpen:n,setMenuOpen:l}),n&&s&&Object(m.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 z-50 md:hidden",children:Object(m.jsxs)("div",{className:"fixed inset-y-0 right-0 w-64 bg-white shadow-lg p-4",children:[Object(m.jsx)("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 text-gray-800 text-xl",children:"\u2715"}),Object(m.jsxs)("div",{className:"mt-12 space-y-4",children:[Object(m.jsx)("button",{onClick:()=>{t("home"),l(!1)},className:"w-full text-right px-4 py-2 text-sm hover:bg-gray-100 rounded-lg",children:"\u05d3\u05e3 \u05d4\u05d1\u05d9\u05ea"}),Object(m.jsx)("button",{onClick:()=>{t("schedule"),l(!1)},className:"w-full text-right px-4 py-2 text-sm hover:bg-gray-100 rounded-lg",children:"\u05dc\u05d5\u05d7 \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd"}),Object(m.jsx)("button",{onClick:()=>{t("profile"),l(!1)},className:"w-full text-right px-4 py-2 text-sm hover:bg-gray-100 rounded-lg",children:"\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc"}),(null===c||void 0===c?void 0:c.isAdmin)&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:()=>{t("admin"),l(!1)},className:"w-full text-right px-4 py-2 text-sm hover:bg-gray-100 rounded-lg",children:"\u05e0\u05d9\u05d4\u05d5\u05dc"}),Object(m.jsx)("button",{onClick:()=>{t("users"),l(!1)},className:"w-full text-right px-4 py-2 text-sm hover:bg-gray-100 rounded-lg",children:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05de\u05e9\u05ea\u05de\u05e9\u05d9\u05dd"}),Object(m.jsx)("button",{onClick:()=>{t("lessons"),l(!1)},className:"w-full text-right px-4 py-2 text-sm hover:bg-gray-100 rounded-lg",children:"\u05e0\u05d9\u05d4\u05d5\u05dc \u05e9\u05d9\u05e2\u05d5\u05e8\u05d9\u05dd"}),Object(m.jsx)("button",{onClick:()=>{t("settings"),l(!1)},className:"w-full text-right px-4 py-2 text-sm hover:bg-gray-100 rounded-lg",children:"\u05d4\u05d2\u05d3\u05e8\u05d5\u05ea"})]}),Object(m.jsx)("button",{onClick:r,className:"w-full text-right px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg",children:"\u05d4\u05ea\u05e0\u05ea\u05e7"})]})]})}),Object(m.jsx)("main",{className:"container mx-auto p-4",children:s?o[e]||Object(m.jsx)(S,{}):Object(m.jsx)(f,{setCurrentScreen:t})})]})};var _=()=>Object(m.jsx)(h,{children:Object(m.jsx)(Z,{})});n.a.createRoot(document.getElementById("root")).render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(h,{children:Object(m.jsxs)(p,{children:[" ",Object(m.jsx)(_,{})]})})}))},97:function(e,t,s){}},[[239,1,2]]]);
//# sourceMappingURL=main.58a9fa81.chunk.js.map